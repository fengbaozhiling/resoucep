function setMenuPosition(a,b,c){function d(a){for(;null!=(a=a.offsetParent);)if("absolute"==a.style.position)return 2;return 1}var g,h,i,j,k,e=document.getElementById(a),f=b?document.getElementById(b):document.getElementById(a+"_menu");if(isUndefined(c)&&(c="43"),g=parseInt(c.substr(0,1)),h=parseInt(c.substr(1,1)),i=sx=sy=sw=sh=ml=mt=mw=mcw=mh=mch=bpl=bpt=0,!(!f||g>0&&!e)){switch(e&&(i=fetchOffset(e,BROWSER.ie&&BROWSER.ie<7?d(f):0),sx=i.left,sy=i.top,sw=e.offsetWidth,sh=e.offsetHeight),mw=f.offsetWidth,mcw=f.clientWidth,mh=f.offsetHeight,mch=f.clientHeight,g){case 1:bpl=sx,bpt=sy;break;case 2:bpl=sx+sw,bpt=sy;break;case 3:bpl=sx+sw,bpt=sy+sh;break;case 4:bpl=sx,bpt=sy+sh}switch(h){case 0:f.style.left=(document.body.clientWidth-f.clientWidth)/2+"px",mt=(document.documentElement.clientHeight-f.clientHeight)/2;break;case 1:ml=bpl-mw,mt=bpt-mh;break;case 2:ml=bpl,mt=bpt-mh;break;case 3:ml=bpl,mt=bpt;break;case 4:ml=bpl-mw,mt=bpt}j=Math.max(document.documentElement.scrollTop,document.body.scrollTop),k=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),in_array(h,[1,4])&&0>ml?(ml=bpl,in_array(g,[1,4])&&(ml+=sw)):ml+mw>k+document.body.clientWidth&&sx>=mw&&(ml=bpl-mw,in_array(g,[2,3])&&(ml-=sw)),in_array(h,[1,2])&&0>mt?(mt=bpt,in_array(g,[1,2])&&(mt+=sh)):mt+mh>j+document.documentElement.clientHeight&&sy>=mh&&(mt=bpt-mh,in_array(g,[3,4])&&(mt-=sh)),"210"==c&&(ml+=69-sw/2,mt-=5,"TEXTAREA"==e.tagName&&(ml-=sw/2,mt+=sh/2)),(0==h||f.scrolly)&&(BROWSER.ie&&BROWSER.ie<7?0==h&&(mt+=j):(f.scrolly&&(mt-=j),f.style.position="fixed")),ml&&(f.style.left=ml+"px"),mt&&(f.style.top=mt+"px"),0==h&&BROWSER.ie&&!document.documentElement.clientHeight&&(f.style.position="absolute",menfuObj.style.top=(document.body.clientHeight-f.clientHeight)/2+"px"),f.style.clip&&!BROWSER.opera&&(f.style.clip="rect(auto, auto, auto, auto)")}}function doane(a){e=a?a:window.event,e||(e=getEvent()),BROWSER.ie&&"undefined"!=typeof e?(e.returnValue=!1,e.cancelBubble=!0):e&&(e.stopPropagation(),e.preventDefault())}function _attachEvent(a,b,c,d){d=d?d:a,a.addEventListener?a.addEventListener(b,c,!1):d.attachEvent&&a.attachEvent("on"+b,c)}function _detachEvent(a,b,c,d){d=d?d:a,a.removeEventListener?a.removeEventListener(b,c,!1):d.detachEvent&&a.detachEvent("on"+b,c)}function fetchOffset(a,b){var e,f,g,c=0,d=0;if(b=b?b:0,a.getBoundingClientRect&&!b&&(e=a.getBoundingClientRect(),f=Math.max(document.documentElement.scrollTop,document.body.scrollTop),g=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),"rtl"==document.documentElement.dir&&(g=g+document.documentElement.clientWidth-document.documentElement.scrollWidth),c=e.left+g-document.documentElement.clientLeft,d=e.top+f-document.documentElement.clientTop),0>=c||0>=d)for(c=a.offsetLeft,d=a.offsetTop;null!=(a=a.offsetParent);)(2!=b||"absolute"!=a.style.position)&&(c+=a.offsetLeft,d+=a.offsetTop);return{left:c,top:d}}function hideMenu(a,b){var c,d,e,f,g,h;if(a=isUndefined(a)?"":a,b=isUndefined(b)?"menu":b,""!=a)if("number"!=typeof a){if("string"==typeof a){if(e=document.getElementById(a),!e||b&&e.mtype!=b)return;clearTimeout(JSMENU.timer[a]),f=function(){var b,c;e.cache?(e.style.display="none",e.cover&&(document.getElementById(a+"_cover").style.display="none")):(e.parentNode.removeChild(e),e.cover&&document.getElementById(a+"_cover").parentNode.removeChild(document.getElementById(a+"_cover"))),b=[];for(c in JSMENU.active[e.layer])a!=JSMENU.active[e.layer][c]&&b.push(JSMENU.active[e.layer][c]);JSMENU.active[e.layer]=b},e.fade?(g=100,h=function(a){if(0==a)return clearTimeout(b),f(),void 0;e.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+a+")",e.style.opacity=a/100,a-=10;var b=setTimeout(function(){h(a)},50)},h(g)):f()}}else for(d in JSMENU.active[a])hideMenu(JSMENU.active[a][d],b);else for(c=1;c<=JSMENU.layer;c++)hideMenu(c,b)}function hideWindow(a,b){b=isUndefined(b)?1:b,hideMenu("fwin_"+a,"win"),b&&hideMenu(),hideMenu("","prompt")}function Ajax(a,b){var c,d;for(c=0;c<AJAX.stack.length&&0!=AJAX.stack[c];c++);return AJAX.stack[c]=1,d=new Object,d.loading="loading...",d.recvType=a?a:"XML",d.waitId=b?document.getElementById(b):"ajaxwaitid",d.resultHandle=null,d.sendString="",d.targetUrl="",d.stackId=0,d.stackId=c,d.setLoading=function(a){"undefined"!=typeof a&&null!==a&&(d.loading=a)},d.setRecvType=function(a){d.recvType=a},d.setWaitId=function(a){d.waitId="object"==typeof a?a:"ajaxwaitid"},d.createXMLHttpRequest=function(){var b,c,a=!1;if(window.XMLHttpRequest)a=new XMLHttpRequest,a.overrideMimeType&&a.overrideMimeType("text/xml");else if(window.ActiveXObject)for(b=["Microsoft.XMLHTTP","MSXML.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.7.0","Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"],c=0;c<b.length;c++)try{if(a=new ActiveXObject(b[c]))return a}catch(d){}return a},d.XMLHttpRequest=d.createXMLHttpRequest(),d.showLoading=function(){!d.waitId||4==d.XMLHttpRequest.readyState&&200==d.XMLHttpRequest.status||$("#"+d.waitId).fadeIn()},d.processHandle=function(){if(4==d.XMLHttpRequest.readyState&&200==d.XMLHttpRequest.status){for(k in AJAX.url)AJAX.url[k]==d.targetUrl&&(AJAX.url[k]=null);d.waitId&&$("#"+d.waitId).fadeOut(),"HTML"==d.recvType?d.resultHandle(d.XMLHttpRequest.responseText,d):"XML"==d.recvType&&(d.XMLHttpRequest.responseXML&&d.XMLHttpRequest.responseXML.lastChild&&"parsererror"!=d.XMLHttpRequest.responseXML.lastChild.localName?d.resultHandle(d.XMLHttpRequest.responseXML.lastChild.firstChild.nodeValue,d):d.resultHandle('<a href="'+d.targetUrl+'" target="_blank" style="color:red">XML解析错误</a>',d)),AJAX.stack[d.stackId]=0}},d.get=function(a,b){var c,e;return setTimeout(function(){d.showLoading()},250),in_array(a,AJAX.url)?!1:(AJAX.url.push(a),d.targetUrl=a,d.XMLHttpRequest.onreadystatechange=d.processHandle,d.resultHandle=b,c=isUndefined(c)?0:c,e=1&c?1001*(d.stackId+1):100,window.XMLHttpRequest?setTimeout(function(){d.XMLHttpRequest.open("GET",d.targetUrl),d.XMLHttpRequest.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.XMLHttpRequest.send(null)},e):setTimeout(function(){d.XMLHttpRequest.open("GET",a,!0),d.XMLHttpRequest.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.XMLHttpRequest.send()},e),void 0)},d.post=function(a,b,c){return setTimeout(function(){d.showLoading()},250),in_array(a,AJAX.url)?!1:(AJAX.url.push(a),d.targetUrl=a,d.sendString=b,d.XMLHttpRequest.onreadystatechange=d.processHandle,d.resultHandle=c,d.XMLHttpRequest.open("POST",a),d.XMLHttpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d.XMLHttpRequest.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.XMLHttpRequest.send(d.sendString),void 0)},d}function ajaxupdateevents(a,b){var c,d;b=b?b:"A",c=a.getElementsByTagName(b);for(k in c)d=c[k],ajaxupdateevent(d)}function ajaxupdateevent(a){var b,c;"object"==typeof a&&a.getAttribute&&a.getAttribute("ajaxtarget")&&(a.id||(a.id=Math.random()),b=a.getAttribute("ajaxevent")?a.getAttribute("ajaxevent"):"click",c=a.getAttribute("ajaxurl")?a.getAttribute("ajaxurl"):a.href,_attachEvent(a,b,newfunction("ajaxget",c,a.getAttribute("ajaxtarget"),a.getAttribute("ajaxwaitid"),a.getAttribute("ajaxloading"),a.getAttribute("ajaxdisplay"))),a.getAttribute("ajaxfunc")&&(a.getAttribute("ajaxfunc").match(/(\w+)\((.+?)\)/),_attachEvent(a,b,newfunction(RegExp.document.getElementById1,RegExp.document.getElementById2))))}function ajaxget(url,showid,waitid,loading,display,recall){var x;waitid="undefined"==typeof waitid||null===waitid?showid:waitid,x=new Ajax,x.setLoading(loading),x.setWaitId(waitid),x.display="undefined"==typeof display||null==display?"":display,x.showId=document.getElementById(showid),x.showId&&(x.showId.orgdisplay="undefined"==typeof x.showId.orgdisplay?x.showId.style.display:x.showId.orgdisplay),"#"==url.substr(strlen(url)-1)&&(url=url.substr(0,strlen(url)-1),x.autogoto=1),url=url+"&inajax=1&ajaxtarget="+showid,x.get(url,function(s,x){var evaled=!1;-1!=s.indexOf("ajaxerror")&&(evalscript(s),evaled=!0),evaled||"undefined"!=typeof ajaxerror&&ajaxerror||x.showId&&(x.showId.style.display=x.showId.orgdisplay,x.showId.style.display=x.display,x.showId.orgdisplay=x.showId.style.display,ajaxinnerhtml(x.showId,s),ajaxupdateevents(x.showId,showid),x.autogoto&&scroll(0,x.showId.offsetTop)),ajaxerror=null,"function"==typeof recall?recall():eval(recall)})}function ajaxpost(formid,showid,waitid,showidclass,submitbtn,recall){var ajaxframeid,ajaxframe,formtarget,handleResult,div;if(waitid="undefined"==typeof waitid||null===waitid?showid:""!==waitid?waitid:"",showidclass=showidclass?showidclass:"",ajaxframeid="ajaxframe",ajaxframe=document.getElementById(ajaxframeid),formtarget=document.getElementById(formid).target,handleResult=function(){var s="",evaled=!1;showloading("none");try{s=document.getElementById(ajaxframeid).contentWindow.document.XMLDocument.text}catch(e){try{s=document.getElementById(ajaxframeid).contentWindow.document.documentElement.firstChild.wholeText}catch(e){try{s=document.getElementById(ajaxframeid).contentWindow.document.documentElement.firstChild.nodeValue}catch(e){s="XML解析错误"}}}isUndefined(s)&&(s="server return empty , Plase check php script"),""!=s&&-1!=s.indexOf("ajaxerror")&&(evalscript(s),evaled=!0),showidclass&&(document.getElementById(showid).className=showidclass),submitbtn&&(submitbtn.disabled=!1),evaled||"undefined"!=typeof ajaxerror&&ajaxerror||ajaxinnerhtml(document.getElementById(showid),s),ajaxerror=null,document.getElementById(formid)&&(document.getElementById(formid).target=formtarget),"function"==typeof recall?recall():eval(recall),evaled||evalscript(s),ajaxframe.loading=0,document.getElementById("append_parent").removeChild(ajaxframe.parentNode)},ajaxframe){if(ajaxframe.loading)return!1}else div=document.createElement("div"),div.style.display="none",div.innerHTML='<iframe name="'+ajaxframeid+'" id="'+ajaxframeid+'" loading="1"></iframe>',document.getElementById("append_parent").appendChild(div),ajaxframe=document.getElementById(ajaxframeid);return _attachEvent(ajaxframe,"load",handleResult),showloading(),document.getElementById(formid).target=ajaxframeid,document.getElementById(formid).action+="&inajax=1",document.getElementById(formid).submit(),submitbtn&&(submitbtn.disabled=!0),doane(),!1}function ajaxTab(a,b,c){var d=$("#"+a),e=$.trim(d.html());(""==e||"Data failed to load"==e)&&$.ajax({url:c,data:b,dataType:"text",success:function(a){d.html(a)},error:function(){return d.html("Data failed to load"),!1}})}function ajaxmenu(ctrlObj,timeout,cache,duration,pos,recall){var menuid,menu,func,url,ctrlid=ctrlObj.id;ctrlid||(ctrlid=ctrlObj.id="ajaxid_"+Math.random()),menuid=ctrlid+"_menu",menu=document.getElementById(menuid),isUndefined(timeout)&&(timeout=3e3),isUndefined(cache)&&(cache=1),isUndefined(pos)&&(pos="43"),isUndefined(duration)&&(duration=timeout>0?0:3),func=function(){showMenu({ctrlid:ctrlid,duration:duration,timeout:timeout,pos:pos,cache:cache,layer:2}),"function"==typeof recall?recall():eval(recall)},menu?""==menu.style.display?hideMenu(menuid):func():(menu=document.createElement("div"),menu.id=menuid,menu.style.display="none",menu.className="p_pop",menu.innerHTML='<div class="p_opt" id="'+menuid+'_content"></div>',document.getElementById("append_parent").appendChild(menu),url=(isUndefined(ctrlObj.href)?ctrlObj.attributes.href.value:ctrlObj.href)+"&ajaxmenu=1",ajaxget(url,menuid+"_content","ajaxwaitid","","",func)),doane()}function ajaxinnerhtml(a,b){var c,d,e,f,g;if("TBODY"!=a.tagName)$(a).html(b);else{for(;a.firstChild;)a.firstChild.parentNode.removeChild(a.firstChild);for(c=document.createElement("DIV"),c.id=a.id+"_div",c.innerHTML='<table><tbody id="'+a.id+'_tbody">'+b+"</tbody></table>",document.getElementById("append_parent").appendChild(c),d=c.getElementsByTagName("TR"),e=d.length,f=0;e>f;f++)a.appendChild(d[0]);for(g=c.getElementsByTagName("INPUT"),e=g.length,f=0;e>f;f++)a.appendChild(g[0]);c.parentNode.removeChild(c)}}function showloading(){$("#ajaxwaitid").fadeIn()}function siteSub(a,b,c){var g,d=2==b?2:1,e=1==c?!0:!1,f=!0;switch(d){case 1:g=a;break;case 2:1==e&&(f=checkForm(document.getElementById(a)))}return 1==f?1==d?(showWindow("sitesub",!1,g,!0,"get","0"),!1):(showWindow("sitesub",!1,a,!0,"post","0"),!1):void 0}function evalscript(a){var b,c,d,e;if(-1==a.indexOf("<script"))return a;for(b=/<script[^\>]*?>([^\x00]*?)<\/script>/gi,c=[];c=b.exec(a);)d=/<script[^\>]*?src=\"([^\>]*?)\"[^\>]*?(reload=\"1\")?(?:charset=\"([\w\-]+?)\")?><\/script>/i,e=[],e=d.exec(c[0]),e?appendscript(e[1],"",e[2],e[3]):(d=/<script(.*?)>([^\x00]+?)<\/script>/i,e=d.exec(c[0]),appendscript("",e[2],-1!=e[1].indexOf("reload=")));return a}function appendscript(a,b,c,d){var g,e=hash(a+b),f=[];if(c||!in_array(e,f)){c&&document.getElementById(e)&&document.getElementById(e).parentNode.removeChild(document.getElementById(e)),f.push(e),g=document.createElement("script"),g.type="text/javascript",g.id=e,g.charset=d?d:BROWSER.firefox?document.characterSet:document.charset;try{a?g.src=a:b&&(g.text=b),document.getElementById("append_parent").appendChild(g)}catch(h){}}}function stripscript(a){return a.replace(/<script.*?>.*?<\/script>/gi,"")}function getNewFormhash(){var b,c,a=document.all;for(b=0;b<a.length;b++)c=a[b],"formhash"==c.name&&$.ajax({type:"GET",async:!1,url:"/index.php?do=ajax&view=ajax&ac=formhash",success:function(a){c.value=a}})}EPWEIKE.namespace("showin");var JSMENU=[];JSMENU.active=[],JSMENU.timer=[],JSMENU.drag=[],JSMENU.layer=0,JSMENU.zIndex={win:1200,menu:1300,dialog:1400,prompt:1500},JSMENU["float"]="",EPWEIKE.showin.showMenu=showMenu=function(a){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,b=isUndefined(a.ctrlid)?a:a.ctrlid,c=isUndefined(a.showid)?b:a.showid,d=isUndefined(a.menuid)?c+"_menu":a.menuid,e=document.getElementById(b),f=document.getElementById(d);if(f){if(g=isUndefined(a.mtype)?"menu":a.mtype,h=isUndefined(a.evt)?"mouseover":a.evt,i=isUndefined(a.pos)?"43":a.pos,j=isUndefined(a.layer)?1:a.layer,k=isUndefined(a.duration)?2:a.duration,l=isUndefined(a.timeout)?250:a.timeout,m=isUndefined(a.maxh)?600:a.maxh,n=isUndefined(a.cache)?1:a.cache,o=isUndefined(a.drag)?"":a.drag,p=o&&document.getElementById(o)?document.getElementById(o):f,q=isUndefined(a.fade)?0:a.fade,r=isUndefined(a.cover)?0:a.cover,s=isUndefined(a.zindex)?JSMENU.zIndex.menu:a.zindex,s=r?s+200:s,"undefined"==typeof JSMENU.active[j]&&(JSMENU.active[j]=[]),"click"==h&&in_array(d,JSMENU.active[j])&&"win"!=g)return hideMenu(d,g),void 0;"menu"==g&&hideMenu(j,g),e&&(e.initialized||(e.initialized=!0,e.unselectable=!0,e.outfunc="function"==typeof e.onmouseout?e.onmouseout:null,e.onmouseout=function(){this.outfunc&&this.outfunc(),3>k&&!JSMENU.timer[d]&&(JSMENU.timer[d]=setTimeout("hideMenu('"+d+"', '"+g+"')",l))},e.overfunc="function"==typeof e.onmouseover?e.onmouseover:null,e.onmouseover=function(a){if(doane(a),this.overfunc&&this.overfunc(),"click"==h)clearTimeout(JSMENU.timer[d]),JSMENU.timer[d]=null;else for(var b in JSMENU.timer)JSMENU.timer[b]&&(clearTimeout(JSMENU.timer[b]),JSMENU.timer[b]=null)})),t=function(a,b,c){if(b=b?b:window.event,1==c){if(in_array(BROWSER.ie?b.srcElement.tagName:b.target.tagName,["TEXTAREA","INPUT","BUTTON","SELECT"]))return;JSMENU.drag=[b.clientX,b.clientY],JSMENU.drag[2]=parseInt(a.style.left),JSMENU.drag[3]=parseInt(a.style.top),document.onmousemove=function(b){try{t(a,b,2)}catch(c){}},document.onmouseup=function(b){try{t(a,b,3)}catch(c){}},doane(b)}else if(2==c&&JSMENU.drag[0]){var d=[b.clientX,b.clientY];a.style.left=JSMENU.drag[2]+d[0]-JSMENU.drag[0]+"px",a.style.top=JSMENU.drag[3]+d[1]-JSMENU.drag[1]+"px",doane(b)}else 3==c&&(JSMENU.drag=[],document.onmousemove=null,document.onmouseup=null)},f.initialized||(f.initialized=!0,f.ctrlkey=b,f.mtype=g,f.layer=j,f.cover=r,e&&e.getAttribute("fwin")&&(f.scrolly=!0),f.style.position="absolute",f.style.zIndex=s+j,f.onclick=function(a){return!a||BROWSER.ie?(window.event.cancelBubble=!0,window.event):(a.stopPropagation(),a)},3>k&&(k>1&&(f.onmouseover=function(){clearTimeout(JSMENU.timer[d]),JSMENU.timer[d]=null}),1!=k&&(f.onmouseout=function(){JSMENU.timer[d]=setTimeout("hideMenu('"+d+"', '"+g+"')",l)})),r&&(u=document.createElement("div"),u.id=d+"_cover",u.style.position="absolute",u.style.zIndex=f.style.zIndex-1,u.style.left=u.style.top="0px",u.style.width="100%",u.style.height=Math.max(document.documentElement.clientHeight,document.body.offsetHeight)+"px",u.style.backgroundColor="#000",u.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity=50)",u.style.opacity=.1,u.onclick=function(){hideMenu()},document.getElementById("append_parent").appendChild(u),_attachEvent(window,"load",function(){u.style.height=Math.max(document.documentElement.clientHeight,document.body.offsetHeight)+"px"},document))),o&&(p.style.cursor="move",p.onmousedown=function(a){try{t(f,a,1)}catch(b){}}),f.style.display="",r&&(document.getElementById(d+"_cover").style.display=""),q?(v=0,w=function(a){if(100==a)return clearTimeout(b),void 0;f.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+a+")",f.style.opacity=a/100,a+=10;var b=setTimeout(function(){w(a)},50)},w(v),f.fade=!0):f.fade=!1,setMenuPosition(c,d,i),m&&f.scrollHeight>m&&(f.style.height=m+"px",BROWSER.opera?f.style.overflow="auto":f.style.overflowY="auto"),k||setTimeout("hideMenu('"+d+"', '"+g+"')",l),in_array(d,JSMENU.active[j])||JSMENU.active[j].push(d),f.cache=n,j>JSMENU.layer&&(JSMENU.layer=j)}},EPWEIKE.showin.showDialog=showDialog=function(msg,mode,t,func,cover,funccancel,auto,ok_txt,cancel_txt){var confirm,menuid,menuObj,s;cover=isUndefined(cover)?"info"==mode?0:1:cover,mode=in_array(mode,["confirm","notice","info","right"])?mode:"alert",confirm="undefined"==typeof ROOTURL?"确定":"確定",ok_txt=ok_txt?ok_txt:confirm,cancel_txt=cancel_txt?cancel_txt:"取消",auto=1==auto?1:0,menuid="fwin_dialog",menuObj=document.getElementById(menuid),menuObj&&hideMenu("fwin_dialog","dialog"),menuObj=document.createElement("div"),menuObj.style.display="none",menuObj.className="fwinmask",menuObj.id=menuid,document.getElementById("append_parent").appendChild(menuObj),s='<table cellpadding="0" cellspacing="0" class="fwin"><tr><td class="tt_l"></td><td class="tt_c"></td><td class="tt_r"></td></tr><tr><td class="m_l"></td><td class="m_c"><h3 class="flb"><em>',s+=t?t:"提示信息",s+='</em><span><a href="javascript:;" id="fwin_dialog_close" class="flbc" onclick="hideMenu(\''+menuid+"', 'dialog')\" title=\"关闭\">×</a></span></h3>","info"==mode?s+=msg?msg:"":(s+='<div class="clearfix c'+("info"==mode?"":" altw")+'"><div class="clearfix '+("alert"==mode?"alert_error":"confirm"==mode?"confirm_info":"right"==mode?"alert_right":"alert_info")+'"><p>'+msg+"</p></div></div>",s+='<p class="o pns"><button id="fwin_dialog_submit" value="true" class="button red"><strong>'+ok_txt+"</strong></button>",s+="confirm"==mode?'<button id="fwin_dialog_cancel" value="true" class="button" onclick="hideMenu(\''+menuid+"', 'dialog')\"><strong>"+cancel_txt+"</strong></button>":"",s+="</p>"),s+='</td><td class="m_r"></td></tr><tr><td class="b_l"></td><td class="b_c"></td><td class="b_r"></td></tr></table>',menuObj.innerHTML=s,document.getElementById("fwin_dialog_submit")&&(document.getElementById("fwin_dialog_submit").onclick=function(){"function"==typeof func?func():eval(func),hideMenu(menuid,"dialog")}),auto&&("function"==typeof func?func():eval(func),hideMenu(menuid,"dialog")),document.getElementById("fwin_dialog_cancel")&&(document.getElementById("fwin_dialog_cancel").onclick=function(){"function"==typeof funccancel?funccancel():eval(funccancel),hideMenu(menuid,"dialog")},document.getElementById("fwin_dialog_close").onclick=document.getElementById("fwin_dialog_cancel").onclick),showMenu({mtype:"dialog",menuid:menuid,duration:3,pos:"00",zindex:JSMENU.zIndex.dialog,cache:0,cover:cover})},EPWEIKE.showin.showWindow=showWindow=function(k,t,url,cover,mode,cache,menuv,recall){var menuid,menuObj,drag,loadingst,func,fetchContent,initMenu,show,titl;return mode=isUndefined(mode)?"get":mode,cache=isUndefined(cache)?1:cache,menuid="fwin_"+k,menuObj=document.getElementById(menuid),drag=null,loadingst=null,disallowfloat&&-1!=disallowfloat.indexOf(k)?(BROWSER.ie&&(url+=(-1!=url.indexOf("?")?"&":"?")+"referer="+escape(location.href)),location.href=url,void 0):(func=function(){"function"==typeof recall?recall():eval(recall)},fetchContent=function(){var a,b;if("get"==mode)menuObj.url=url,url+=(url.search(/\?/)>0?"&":"?")+"infloat=yes&handlekey="+k,url+=-1==cache?"&t="+ +new Date:"",ajaxget(url,"fwin_content_cont_"+k,"ajaxwaitid","请稍候...","",function(){initMenu(),show(),func()});else if("post"==mode){for(menuObj.act=document.getElementById(url).action,btnObj=document.getElementsByTagName("button"),a="",b=0;b<btnObj.length;b++)document.getElementById(url).elements[btnObj[b].name]&&(a=btnObj[b]);ajaxpost(url,"fwin_content_cont_"+k,"","",a,function(){initMenu(),show(),func()})}loadingst=setTimeout(function(){showDialog("","info",'<img src="'+IMGDIR+'/loading.gif"> 请稍候...')},500)},initMenu=function(){var a,b,c;for(clearTimeout(loadingst),a=menuObj.getElementsByTagName("*"),b=!1,c=0;c<a.length;c++)a[c].id&&a[c].setAttribute("fwin",k),"flb"!=a[c].className||b||(a[c].id||(a[c].id="fctrl_"+k),drag=a[c].id,b=!0)},show=function(){hideMenu("fwin_dialog","dialog"),v={mtype:"win",menuid:menuid,duration:3,pos:"00",zindex:JSMENU.zIndex.win,drag:null==typeof drag?"":drag,cache:cache,cover:cover};for(k in menuv)v[k]=menuv[k];showMenu(v)},menuObj?"get"==mode&&url!=menuObj.url||"post"==mode&&document.getElementById(url).action!=menuObj.act?fetchContent():show():(titl=0==t?'<a href="javascript:;" class="flbc_nohead" onclick="hideWindow(\''+k+'\')" title="关闭">×</a>':'<h3 class="flb"><em>'+t+'</em><span><a href="javascript:;" class="flbc" onclick="hideWindow(\''+k+'\')" title="关闭">×</a></span></h3>',menuObj=document.createElement("div"),menuObj.id=menuid,menuObj.className="fwinmask",menuObj.style.display="none",document.getElementById("append_parent").appendChild(menuObj),menuObj.innerHTML='<link rel="stylesheet" type="text/css" href="'+CSSURL+'css/showDialog.css"><table cellpadding="0" cellspacing="0" class="fwin"><tr><td class="tt_l"></td><td class="tt_c" ondblclick="hideWindow(\''+k+'\')"></td><td class="tt_r"></td></tr><tr><td class="m_l" ondblclick="hideWindow(\''+k+'\')"></td><td class="m_c" id="fwin_content_'+k+'">'+titl+'<div class="fwin_content_cont" id="fwin_content_cont_'+k+'"></div>'+'</td><td class="m_r" ondblclick="hideWindow(\''+k+'\')"></td></tr><tr><td class="b_l"></td><td class="b_c" ondblclick="hideWindow(\''+k+'\')"></td><td class="b_r"></td></tr></table>',"html"==mode?(document.getElementById("fwin_content_cont_"+k).innerHTML=url,initMenu(),show()):fetchContent()),cover=isUndefined(cover)?"true"==cover?0:1:cover,doane(),void 0)},$(function(){function b(a){var b=setTimeout(function(){a.slideDown(200),clearTimeout(b)},400)}function c(a){a.animate({opacity:.01},200,function(){a.slideUp(200,function(){a.remove()})})}var a=$(".messages");b(a),$(".messages .close").click(function(){var a=$(this).parent(".messages");c(a)})});