!function(a){var b,c;a.fn.jcarousel=function(a){return this.each(function(){new c(this,a)})},b={vertical:!1,start:1,offset:1,size:null,scroll:3,visible:null,animation:"normal",easing:"swing",auto:0,wrap:null,initCallback:null,reloadCallback:null,itemLoadCallback:null,itemFirstInCallback:null,itemFirstOutCallback:null,itemLastInCallback:null,itemLastOutCallback:null,itemVisibleInCallback:null,itemVisibleOutCallback:null,buttonNextHTML:"<div></div>",buttonPrevHTML:"<div></div>",buttonNextEvent:"click",buttonPrevEvent:"click",buttonNextCallback:null,buttonPrevCallback:null},a.jcarousel=function(c,d){var e,f,g,h,i,j,k;for(this.options=a.extend({},b,d||{}),this.locked=!1,this.container=null,this.clip=null,this.list=null,this.buttonNext=null,this.buttonPrev=null,this.wh=this.options.vertical?"height":"width",this.lt=this.options.vertical?"top":"left",e="",f=c.className.split(" "),g=0;g<f.length;g++)if(-1!=f[g].indexOf("jcarousel-skin")){a(c).removeClass(f[g]),e=f[g];break}"UL"==c.nodeName||"OL"==c.nodeName?(this.list=a(c),this.container=this.list.parent(),this.container.hasClass("jcarousel-clip")?(this.container.parent().hasClass("jcarousel-container")||(this.container=this.container.wrap("<div></div>")),this.container=this.container.parent()):this.container.hasClass("jcarousel-container")||(this.container=this.list.wrap("<div></div>").parent())):(this.container=a(c),this.list=a(c).find(">ul,>ol,div>ul,div>ol")),""!=e&&-1==this.container.parent()[0].className.indexOf("jcarousel-skin")&&this.container.wrap('<div class=" '+e+'"></div>'),this.clip=this.list.parent(),this.clip.length&&this.clip.hasClass("jcarousel-clip")||(this.clip=this.list.wrap("<div></div>").parent()),this.buttonPrev=a(".jcarousel-prev",this.container),0==this.buttonPrev.size()&&null!=this.options.buttonPrevHTML&&(this.buttonPrev=this.clip.before(this.options.buttonPrevHTML).prev()),this.buttonPrev.addClass(this.className("jcarousel-prev")),this.buttonNext=a(".jcarousel-next",this.container),0==this.buttonNext.size()&&null!=this.options.buttonNextHTML&&(this.buttonNext=this.clip.before(this.options.buttonNextHTML).prev()),this.buttonNext.addClass(this.className("jcarousel-next")),this.clip.addClass(this.className("jcarousel-clip")),this.list.addClass(this.className("jcarousel-list")),this.container.addClass(this.className("jcarousel-container")),h=null!=this.options.visible?Math.ceil(this.clipping()/this.options.visible):null,i=this.list.children("li"),j=this,i.size()>0&&(k=0,g=this.options.offset,i.each(function(){j.format(this,g++),k+=j.dimension(this,h)}),this.list.css(this.wh,k+"px"),d&&void 0!==d.size||(this.options.size=i.size())),this.container.css("display","block"),this.buttonNext.css("display","block"),this.buttonPrev.css("display","block"),this.funcNext=function(){j.next()},this.funcPrev=function(){j.prev()},this.funcResize=function(){j.reload()},null!=this.options.initCallback&&this.options.initCallback(this,"init"),a.browser.safari?(this.buttons(!1,!1),a(window).bind("load",function(){j.setup()})):a(window).bind("load",function(){j.setup()}),this.setup()},c=a.jcarousel,c.fn=c.prototype={jcarousel:"0.2.3"},c.fn.extend=c.extend=a.extend,c.fn.extend({setup:function(){if(this.first=null,this.last=null,this.prevFirst=null,this.prevLast=null,this.animating=!1,this.timer=null,this.tail=null,this.inTail=!1,!this.locked){this.list.css(this.lt,this.pos(this.options.offset)+"px");var b=this.pos(this.options.start);this.prevFirst=this.prevLast=null,this.animate(b,!1),a(window).unbind("resize",this.funcResize).bind("resize",this.funcResize)}},reset:function(){this.list.empty(),this.list.css(this.lt,"0px"),this.list.css(this.wh,"10px"),null!=this.options.initCallback&&this.options.initCallback(this,"reset"),this.setup()},reload:function(){var b,d,e,f;null!=this.tail&&this.inTail&&this.list.css(this.lt,c.intval(this.list.css(this.lt))+this.tail),this.tail=null,this.inTail=!1,null!=this.options.reloadCallback&&this.options.reloadCallback(this),null!=this.options.visible&&(b=this,d=Math.ceil(this.clipping()/this.options.visible),e=0,f=0,a("li",this.list).each(function(a){e+=b.dimension(this,d),a+1<b.first&&(f=e)}),this.list.css(this.wh,e+"px"),this.list.css(this.lt,-f+"px")),this.scroll(this.first,!1)},lock:function(){this.locked=!0,this.buttons()},unlock:function(){this.locked=!1,this.buttons()},size:function(a){return void 0!=a&&(this.options.size=a,this.locked||this.buttons()),this.options.size},has:function(a,b){var c,d;for(void 0!=b&&b||(b=a),null!==this.options.size&&b>this.options.size&&(b=this.options.size),c=a;b>=c;c++)if(d=this.get(c),!d.length||d.hasClass("jcarousel-item-placeholder"))return!1;return!0},get:function(b){return a(".jcarousel-item-"+b,this.list)},add:function(a,b){var g,h,i,j,d=this.get(a),e=0;if(0==d.length){for(d=this.create(a),h=c.intval(a);g=this.get(--h);)if(0>=h||g.length){0>=h?this.list.prepend(d):g.after(d);break}}else e=this.dimension(d);return d.removeClass(this.className("jcarousel-item-placeholder")),"string"==typeof b?d.html(b):d.empty().append(b),i=null!=this.options.visible?Math.ceil(this.clipping()/this.options.visible):null,j=this.dimension(d,i)-e,a>0&&a<this.first&&this.list.css(this.lt,c.intval(this.list.css(this.lt))-j+"px"),this.list.css(this.wh,c.intval(this.list.css(this.wh))+j+"px"),d},remove:function(a){var d,b=this.get(a);!b.length||a>=this.first&&a<=this.last||(d=this.dimension(b),a<this.first&&this.list.css(this.lt,c.intval(this.list.css(this.lt))+d+"px"),b.remove(),this.list.css(this.wh,c.intval(this.list.css(this.wh))-d+"px"))},next:function(){this.stopAuto(),null==this.tail||this.inTail?this.scroll("both"!=this.options.wrap&&"last"!=this.options.wrap||null==this.options.size||this.last!=this.options.size?this.first+this.options.scroll:1):this.scrollTail(!1)},prev:function(){this.stopAuto(),null!=this.tail&&this.inTail?this.scrollTail(!0):this.scroll("both"!=this.options.wrap&&"first"!=this.options.wrap||null==this.options.size||1!=this.first?this.first-this.options.scroll:this.options.size)},scrollTail:function(a){if(!this.locked&&!this.animating&&this.tail){var b=c.intval(this.list.css(this.lt));a?b+=this.tail:b-=this.tail,this.inTail=!a,this.prevFirst=this.first,this.prevLast=this.last,this.animate(b)}},scroll:function(a,b){this.locked||this.animating||this.animate(this.pos(a),b)},pos:function(a){var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;if(!this.locked&&!this.animating){for(a=c.intval(a),"circular"!=this.options.wrap&&(a=1>a?1:this.options.size&&a>this.options.size?this.options.size:a),b=this.first>a,d=c.intval(this.list.css(this.lt)),e="circular"!=this.options.wrap&&this.first<=1?1:this.first,f=b?this.get(e):this.get(this.last),g=b?e:e-1,h=null,i=0,j=!1,k=0;b?--g>=a:++g<a;)h=this.get(g),j=!h.length,0==h.length&&(h=this.create(g).addClass(this.className("jcarousel-item-placeholder")),f[b?"before":"after"](h)),f=h,k=this.dimension(h),j&&(i+=k),null!=this.first&&("circular"==this.options.wrap||g>=1&&(null==this.options.size||g<=this.options.size))&&(d=b?d+k:d-k);for(l=this.clipping(),m=[],n=0,g=a,o=0,f=this.get(a-1);++n;){if(h=this.get(g),j=!h.length,0==h.length&&(h=this.create(g).addClass(this.className("jcarousel-item-placeholder")),0==f.length?this.list.prepend(h):f[b?"before":"after"](h)),f=h,k=this.dimension(h),0==k)return 0;if("circular"!=this.options.wrap&&null!==this.options.size&&g>this.options.size?m.push(h):j&&(i+=k),o+=k,o>=l)break;g++}for(p=0;p<m.length;p++)m[p].remove();if(i>0&&(this.list.css(this.wh,this.dimension(this.list)+i+"px"),b&&(d-=i,this.list.css(this.lt,c.intval(this.list.css(this.lt))-i+"px"))),q=a+n-1,"circular"!=this.options.wrap&&this.options.size&&q>this.options.size&&(q=this.options.size),g>q)for(n=0,g=q,o=0;++n&&(h=this.get(g--),h.length)&&(o+=this.dimension(h),!(o>=l)););for(r=q-n+1,"circular"!=this.options.wrap&&1>r&&(r=1),this.inTail&&b&&(d+=this.tail,this.inTail=!1),this.tail=null,"circular"!=this.options.wrap&&q==this.options.size&&q-n+1>=1&&(s=c.margin(this.get(q),this.options.vertical?"marginBottom":"marginRight"),o-s>l&&(this.tail=o-l-s));a-->r;)d+=this.dimension(this.get(a));return this.prevFirst=this.first,this.prevLast=this.last,this.first=r,this.last=q,d}},animate:function(a,b){var c,d,e;this.locked||this.animating||(this.animating=!0,c=this,d=function(){c.animating=!1,0==a&&c.list.css(c.lt,0),("both"==c.options.wrap||"last"==c.options.wrap||null==c.options.size||c.last<c.options.size)&&c.startAuto(),c.buttons(),c.notify("onAfterAnimation")},this.notify("onBeforeAnimation"),this.options.animation&&0!=b?(e=this.options.vertical?{top:a}:{left:a},this.list.animate(e,this.options.animation,this.options.easing,d)):(this.list.css(this.lt,a+"px"),d()))},startAuto:function(a){if(void 0!=a&&(this.options.auto=a),0==this.options.auto)return this.stopAuto();if(null==this.timer){var b=this;this.timer=setTimeout(function(){b.next()},1e3*this.options.auto)}},stopAuto:function(){null!=this.timer&&(clearTimeout(this.timer),this.timer=null)},buttons:function(a,b){var c;(void 0==a||null==a)&&(a=!this.locked&&0!==this.options.size&&(this.options.wrap&&"first"!=this.options.wrap||null==this.options.size||this.last<this.options.size),this.locked||this.options.wrap&&"first"!=this.options.wrap||null==this.options.size||!(this.last>=this.options.size)||(a=null!=this.tail&&!this.inTail)),(void 0==b||null==b)&&(b=!this.locked&&0!==this.options.size&&(this.options.wrap&&"last"!=this.options.wrap||this.first>1),this.locked||this.options.wrap&&"last"!=this.options.wrap||null==this.options.size||1!=this.first||(b=null!=this.tail&&this.inTail)),c=this,this.buttonNext[a?"bind":"unbind"](this.options.buttonNextEvent,this.funcNext)[a?"removeClass":"addClass"](this.className("jcarousel-next-disabled")).attr("disabled",a?!1:!0),this.buttonPrev[b?"bind":"unbind"](this.options.buttonPrevEvent,this.funcPrev)[b?"removeClass":"addClass"](this.className("jcarousel-prev-disabled")).attr("disabled",b?!1:!0),this.buttonNext.length>0&&(void 0==this.buttonNext[0].jcarouselstate||this.buttonNext[0].jcarouselstate!=a)&&null!=this.options.buttonNextCallback&&(this.buttonNext.each(function(){c.options.buttonNextCallback(c,this,a)}),this.buttonNext[0].jcarouselstate=a),this.buttonPrev.length>0&&(void 0==this.buttonPrev[0].jcarouselstate||this.buttonPrev[0].jcarouselstate!=b)&&null!=this.options.buttonPrevCallback&&(this.buttonPrev.each(function(){c.options.buttonPrevCallback(c,this,b)}),this.buttonPrev[0].jcarouselstate=b)},notify:function(a){var b=null==this.prevFirst?"init":this.prevFirst<this.first?"next":"prev";this.callback("itemLoadCallback",a,b),this.prevFirst!==this.first&&(this.callback("itemFirstInCallback",a,b,this.first),this.callback("itemFirstOutCallback",a,b,this.prevFirst)),this.prevLast!==this.last&&(this.callback("itemLastInCallback",a,b,this.last),this.callback("itemLastOutCallback",a,b,this.prevLast)),this.callback("itemVisibleInCallback",a,b,this.first,this.last,this.prevFirst,this.prevLast),this.callback("itemVisibleOutCallback",a,b,this.prevFirst,this.prevLast,this.first,this.last)},callback:function(b,c,d,e,f,g,h){var i,j,k;if(void 0!=this.options[b]&&("object"==typeof this.options[b]||"onAfterAnimation"==c)&&(i="object"==typeof this.options[b]?this.options[b][c]:this.options[b],a.isFunction(i)))if(j=this,void 0===e)i(j,d,c);else if(void 0===f)this.get(e).each(function(){i(j,this,e,d,c)});else for(k=e;f>=k;k++)null===k||k>=g&&h>=k||this.get(k).each(function(){i(j,this,k,d,c)})},create:function(a){return this.format("<li></li>",a)},format:function(b,c){var d=a(b).addClass(this.className("jcarousel-item")).addClass(this.className("jcarousel-item-"+c));return d.attr("jcarouselindex",c),d},className:function(a){return a+" "+a+(this.options.vertical?"-vertical":"-horizontal")},dimension:function(b,d){var g,e=void 0!=b.jquery?b[0]:b,f=this.options.vertical?e.offsetHeight+c.margin(e,"marginTop")+c.margin(e,"marginBottom"):e.offsetWidth+c.margin(e,"marginLeft")+c.margin(e,"marginRight");return void 0==d||f==d?f:(g=this.options.vertical?d-c.margin(e,"marginTop")-c.margin(e,"marginBottom"):d-c.margin(e,"marginLeft")-c.margin(e,"marginRight"),a(e).css(this.wh,g+"px"),this.dimension(e))},clipping:function(){return this.options.vertical?this.clip[0].offsetHeight-c.intval(this.clip.css("borderTopWidth"))-c.intval(this.clip.css("borderBottomWidth")):this.clip[0].offsetWidth-c.intval(this.clip.css("borderLeftWidth"))-c.intval(this.clip.css("borderRightWidth"))},index:function(a,b){return void 0==b&&(b=this.options.size),Math.round(((a-1)/b-Math.floor((a-1)/b))*b)+1}}),c.extend({defaults:function(c){return a.extend(b,c||{})},margin:function(b,d){var e,g,h,f;return b?(e=void 0!=b.jquery?b[0]:b,"marginRight"==d&&a.browser.safari?(f={display:"block","float":"none",width:"auto"},a.swap(e,f,function(){g=e.offsetWidth}),f.marginRight=0,a.swap(e,f,function(){h=e.offsetWidth}),h-g):c.intval(a.css(e,d))):0},intval:function(a){return a=parseInt(a),isNaN(a)?0:a}})}(jQuery);